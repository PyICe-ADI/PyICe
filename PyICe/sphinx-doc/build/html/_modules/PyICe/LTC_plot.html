<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PyICe.LTC_plot &mdash; PyICe 9000 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '9000',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/tssop.ico"/>
    <link rel="top" title="PyICe 9000 documentation" href="../../PyICe.html" />
    <link rel="up" title="Module code" href="../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for PyICe.LTC_plot</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&#39;&#39;&#39;</span>
<span class="sd">Marcom Compliant Plot Generator</span>

<span class="sd">This program can be used to generate plots for general lab use or to</span>
<span class="sd">generate Marcom specific plots that can be imported directly into the</span>
<span class="sd">datasheet in SVG format.</span>


<span class="sd">The objects that can be created with this program are:</span>
<span class="sd">  1) plot</span>
<span class="sd">  2) Page</span>
<span class="sd">  3) Multipage_pdf</span>

<span class="sd">The basic model is simple. You create one or more plots and add things to them</span>
<span class="sd">like traces, histograms, legends, arrows, notes, etc. Once your plots are populated</span>
<span class="sd">you create one or more pages and determine how you want the plots to arrange on</span>
<span class="sd">each page. For instance you can create an 8.5x11 page and add 9 plots to it in</span>
<span class="sd">a standard 3x3 grid. You can make one big page if you want. It doesn&#39;t have to be</span>
<span class="sd">a standard size if you don&#39;t care what the printer does with it and it won&#39;t affect</span>
<span class="sd">your SVG files to Marcom. If you want to have multiple pages of plots you can</span>
<span class="sd">create a Mulipage_pdf and add one or more pages to it.</span>

<span class="sd">If you want larger plots with just one plot per page as in plot_tools.py you can</span>
<span class="sd">create a page per plot, add a plot to each page and add all of the pages to a</span>
<span class="sd">Multipage_pdf.</span>

<span class="sd">So to start, you&#39;ll need to create a python work file and import this program:</span>
<span class="sd">e.g.</span>

<span class="sd">::</span>
<span class="sd">  </span>
<span class="sd">   ----------- LTCXXXX_plots.py -------------- </span>
<span class="sd">  |import sys                                 |</span>
<span class="sd">  |sys.path.append(&quot;../../../PyICe&quot;)          |</span>
<span class="sd">  |import LTC_plot                            |</span>
<span class="sd">  |    .                                      |</span>
<span class="sd">  |    .                                      |</span>
<span class="sd">  |    .                                      |</span>
<span class="sd">   ------------------------------------------- </span>

<span class="sd">Next you want to create your plots. A generally preferable work flow would be to</span>
<span class="sd">create all of your plots without regard to reference on a Page or Multipage_pdf.</span>

<span class="sd">::</span>
<span class="sd">  </span>
<span class="sd">  G0 = LTC_plot.plot(</span>
<span class="sd">                      plot_title      = &quot;EN/FBIN Thresholds&quot;,</span>
<span class="sd">                      plot_name       = &quot;8709 G0&quot;,</span>
<span class="sd">                      xaxis_label     = &quot;TEMPERATURE (&quot; + DEGC + &quot;)&quot;,</span>
<span class="sd">                      yaxis_label     = &quot;FBIN CHIP ENABLE (V)&quot;,</span>
<span class="sd">                      xlims           = (-50, 125),</span>
<span class="sd">                      ylims           = (1.2, 1.4),</span>
<span class="sd">                      xminor          = 0,</span>
<span class="sd">                      xdivs           = 7,</span>
<span class="sd">                      yminor          = 0,</span>
<span class="sd">                      ydivs           = 10,</span>
<span class="sd">                      logx            = False,</span>
<span class="sd">                      logy            = False)</span>

<span class="sd">A plot is nothing more than a record of the plot you want to create. It doesn&#39;t</span>
<span class="sd">support any outputting methods itself. A plot must eventually be added to a Page</span>
<span class="sd">to be useful. Only a Page can be generated as an SVG file, even if there&#39;s only</span>
<span class="sd">one plot on the page.</span>

<span class="sd">The arguments of a plot instance are shown below. All plot arguments are required.</span>

<span class="sd">plot_title  : &quot;string&quot;</span>
<span class="sd">plot_name   : &quot;string&quot;</span>
<span class="sd">xaxis_label : &quot;string&quot;</span>
<span class="sd">yaxis_label : &quot;string&quot;</span>
<span class="sd">  Accepts control characters such as \\n to start a second line. </span>
<span class="sd">  These text fields also respond to Tex formatting for subscripting</span>
<span class="sd">  There are a few unicode characters available in LTC_plot</span>
<span class="sd">  to help with greek characters and degree signs, etc. Be aware</span>
<span class="sd">  that the Marcom minus sign is not the same as the one you type.</span>
<span class="sd">  You may wan to use LTC_plot.minus.                            </span>
<span class="sd">xlims : (xmin, xmax)</span>
<span class="sd">ylims : (ymin, ymax)</span>
<span class="sd">  These two fields also accept python None or string &quot;auto&quot;</span>
<span class="sd">  for automatic scaling. Autoscaling is useful to view the</span>
<span class="sd">  data for the first time and then the final values can be</span>
<span class="sd">  entered later once the data is understood.</span>
<span class="sd">xminor : 0</span>
<span class="sd">  This is the number of minor X divisions per major X division.</span>
<span class="sd">xdivs : 7</span>
<span class="sd">  This is the number of major X divisions.</span>
<span class="sd">yminor : 0</span>
<span class="sd">  This is the number of minor Y divisions per major XY division.</span>
<span class="sd">ydivs : 10</span>
<span class="sd">  This is the number of major Y divisions.</span>
<span class="sd">logx : False</span>
<span class="sd">  Sets the X axis to a log scale with locators at [1,2,3,4,5,6,7,8,9].</span>
<span class="sd">logy : False</span>
<span class="sd">  Sets the Y axis to a log scale with locators at [1,2,3,4,5,6,7,8,9].</span>

<span class="sd">Once you have a plot you can add things to it such as:</span>
<span class="sd">  - add_trace()</span>
<span class="sd">  - add_histogram()</span>
<span class="sd">  - add_note()</span>
<span class="sd">  - add_legend()</span>
<span class="sd">  - add_arrow()</span>
<span class="sd">  - make_second_y_axis()</span>

<span class="sd">The most common element is a trace. You can add as many traces as you like. The same is true of histograms.</span>
<span class="sd">You can also put traces and histograms on the same plot (for instance to show the Gaussian normal curve).</span>

<span class="sd">When you add a trace you have the option to specify line style and marker. Linear datasheets often use</span>
<span class="sd">dotted or dot dash lines for improved black and white readability but rarely if even use markers so use</span>
<span class="sd">them judiciously.</span>

<span class="sd">Valid linestyles are:</span>
<span class="sd">  - &#39;-&#39;</span>
<span class="sd">  - &#39;--&#39;</span>
<span class="sd">  - &#39;-.&#39;</span>
<span class="sd">  - &#39;:&#39;</span>

<span class="sd">and valid markers are:</span>
<span class="sd">  - &#39;:&#39;</span>
<span class="sd">  - &#39;.&#39;</span>
<span class="sd">  - &#39;,&#39;</span>
<span class="sd">  - &#39;o&#39;</span>
<span class="sd">  - &#39;v&#39;</span>
<span class="sd">  - &#39;^&#39;</span>
<span class="sd">  - &#39;&lt;&#39;</span>
<span class="sd">  - &#39;&gt;&#39;</span>
<span class="sd">  - &#39;1&#39;</span>
<span class="sd">  - &#39;2&#39;</span>
<span class="sd">  - &#39;3&#39;</span>
<span class="sd">  - &#39;4&#39;</span>
<span class="sd">  - &#39;8&#39;</span>
<span class="sd">  - &#39;s&#39;</span>
<span class="sd">  - &#39;p&#39;</span>
<span class="sd">  - &#39;*&#39;</span>
<span class="sd">  - &#39;h&#39;</span>
<span class="sd">  - &#39;H&#39;</span>
<span class="sd">  - &#39;+&#39;</span>
<span class="sd">  - &#39;x&#39;</span>
<span class="sd">  - &#39;D&#39;</span>
<span class="sd">  - &#39;d&#39;</span>
<span class="sd">  - &#39;|&#39;</span>
<span class="sd">  - &#39;_&#39;</span>
<span class="sd">  - TICKLEFT</span>
<span class="sd">  - TICKRIGHT</span>
<span class="sd">  - TICKUP</span>
<span class="sd">  - TICKDOWN</span>
<span class="sd">  - CARETLEFT</span>
<span class="sd">  - CARETRIGHT</span>
<span class="sd">  - CARETUP</span>
<span class="sd">  - CARETDOWN</span>


<span class="sd">Please see matplot lib docs online for more details.</span>

<span class="sd">Trace colors currently supported are:</span>
<span class="sd">  - LT_RED_1</span>
<span class="sd">  - LT_BLUE_1</span>
<span class="sd">  - LT_GREEN_1</span>
<span class="sd">  - LT_COPPER_1</span>
<span class="sd">  - LT_BLACK</span>
<span class="sd">  - LT_COPPER_2</span>
<span class="sd">  - LT_RED_2</span>
<span class="sd">  - LT_BLUE_2</span>
<span class="sd">  - LT_GREEN_2</span>
<span class="sd">  - LT_YELLOW_2</span>
<span class="sd">  - LT_BLUE_2_40PCT</span>
<span class="sd">  - LT_RED_1_40PCT</span>

<span class="sd">You can make your own colors by entering a list of RGB colors (r,g,b), all of which should be between 0 and 1 rather than 0 to 255.</span>
<span class="sd">**This is strongly discouraged however, as it will not be in compliance with LTC standards and should not make its way to Marcom.**</span>

<span class="sd">add_legend takes arguments:</span>
<span class="sd">  - axis</span>
<span class="sd">  - location</span>
<span class="sd">  - justification</span>
<span class="sd">  - use_axes_scale</span>

<span class="sd">axis</span>
<span class="sd">  The axis from which the legend items have been added.</span>
<span class="sd">location</span>
<span class="sd">  Coordinates in an xy list (x, y) of where to place the legend.</span>
<span class="sd">  These are relative, see use_axes_scale.</span>
<span class="sd">justification</span>
<span class="sd">  Justification of the test of the legend. Accepts:</span>
<span class="sd">    - &quot;best&quot;</span>
<span class="sd">    - &quot;upper right&quot;</span>
<span class="sd">    - &quot;upper left&quot;</span>
<span class="sd">    - &quot;lower left&quot;</span>
<span class="sd">    - &quot;lower right&quot;</span>
<span class="sd">    - &quot;right&quot;</span>
<span class="sd">    - &quot;center left&quot;</span>
<span class="sd">    - &quot;center right&quot;</span>
<span class="sd">    - &quot;lower center&quot;</span>
<span class="sd">    - &quot;upper center&quot;</span>
<span class="sd">    - &quot;center&quot;</span>
<span class="sd">    </span>
<span class="sd">    </span>
<span class="sd">use_axes_scale:</span>
<span class="sd">  True means place the legend by the scale of the data values whereas False means use values from 0 to 1 representing data independent percentage of the graph size.</span>

<span class="sd">Notes, on the other hand, need to have coordinates given.</span>
<span class="sd">Both support the use_axes_scale argument which defaults to True referencing the item to the data values rather than as a percentage (0..1) of the graph limits.</span>

<span class="sd">Data can come from a number of sources such as a CSV file or a .sqlite database and should be a zipped list</span>
<span class="sd">of (x,y) values for a trace and just a list for a histogram. Consult the examples file for details.</span>

<span class="sd">You can also add as many notes as you like. The position of the notes can be set by either referring them</span>
<span class="sd">to the axes_scale, a scale relative to your data or a percentage scale (0..1) of the axes extents. The default</span>
<span class="sd">is to use the scale of your data. This should be easier to help you locate the notes, etc as the graticules</span>
<span class="sd">will more precisely help you picture where the item will be.</span>

<span class="sd">You can only add one legend. For each trace on a given axis, it will place a label preceded by a line stub</span>
<span class="sd">in the same color and width of the trace. Generally the legend will placed along side the axis to which it</span>
<span class="sd">belongs but you can specify where it goes.</span>

<span class="sd">An arrow is based on the matplotlib annotate() object and consists of a text box with an arrow emanating</span>
<span class="sd">from it. You control where the lower left corner of the text goes as well as the arrow tip.</span>

<span class="sd">If you add a second y axis you have to, once again, specify a few required items in a similar manner to when</span>
<span class="sd">you created the plot:</span>
<span class="sd">1)  yaxis_label</span>
<span class="sd">2)  ylims</span>
<span class="sd">3)  yminor</span>
<span class="sd">4)  ydivs</span>
<span class="sd">5)  logy</span>

<span class="sd">As you add traces and histograms you&#39;ll need to specify to which axis they belong (1 or 2).</span>

<span class="sd">Once you have created all of your plots you will need to add them to a page:</span>

<span class="sd">::</span>

<span class="sd">  Page1 = Page(rows_x_cols = (3, 3), page_size = (8.5, 11))</span>

<span class="sd">Defaults for rows_x_cols = (1, 1) and for page_size is None. If you omit the page_size</span>
<span class="sd">or specify None, the page will shrink to fit the plots you add to it. If, on the other</span>
<span class="sd">hand, you specify a page size and the plots you add to it don&#39;t quite fit, the plots</span>
<span class="sd">will overlap a bit. That won&#39;t matter for datasheet importation as you&#39;ll see later.</span>
<span class="sd">Alternately, if your plots are swimming on your page, they&#39;ll be spread out to roughly</span>
<span class="sd">fill the Page.</span>

<span class="sd">Pages support the following methods:</span>
<span class="sd">  1. add_plot()</span>
<span class="sd">  2. create_pdf()</span>
<span class="sd">  3. create_svg()</span>
<span class="sd">  4. kit_datasheet()</span>

<span class="sd">add_plot() has options to change the plot size on the page such as plot_sizex and</span>
<span class="sd">plot_sizey. These values are extremely specific to datasheets and should not be changed</span>
<span class="sd">if the plots are to be sent to Marcom. It&#39;s best to enter the plot instance and position</span>
<span class="sd">and leave the rest alone.</span>

<span class="sd">::</span>

<span class="sd">  Page1.add_plot(G01, position = 1)</span>
<span class="sd">  Page1.add_plot(G02, position = 2)</span>
<span class="sd">  Page1.add_plot(G03, position = 3)</span>

<span class="sd">As you add plots to the page with a given position, the plots appear on the page top to</span>
<span class="sd">bottom, left to right.</span>

<span class="sd">So a Page that was specified as 3x3 would add up to 9 plots in the following order:</span>

<span class="sd">::</span>
<span class="sd">  </span>
<span class="sd">   ---------------------------</span>
<span class="sd">  |                           |</span>
<span class="sd">  |   [1]     [2]     [3]     |</span>
<span class="sd">  |                           |</span>
<span class="sd">  |                           |</span>
<span class="sd">  |   [4]     [5]     [6]     |</span>
<span class="sd">  |                           |</span>
<span class="sd">  |                           |</span>
<span class="sd">  |   [7]     [8]     [9]     |</span>
<span class="sd">  |                           |</span>
<span class="sd">   ---------------------------</span>


<span class="sd">Or a 2x2 Page would be positioned as:</span>

<span class="sd">::</span>
<span class="sd">  </span>
<span class="sd">   -------------------</span>
<span class="sd">  |                   |</span>
<span class="sd">  |   [1]     [2]     |</span>
<span class="sd">  |                   |</span>
<span class="sd">  |                   |</span>
<span class="sd">  |   [3]     [4]     |</span>
<span class="sd">  |                   |</span>
<span class="sd">   -------------------</span>

<span class="sd">Pages support the following methods:</span>
<span class="sd">  1. create_pdf(&quot;LTCXXXX_Page1&quot;)</span>
<span class="sd">  2. create_svg(&quot;LTCXXXX_Page1&quot;)</span>
<span class="sd">  3. kit_datasheet(&quot;LTCXXXX_Page1&quot;)</span>

<span class="sd">Each of these takes just a file_basename. The file extension is added to match the</span>
<span class="sd">output.</span>

<span class="sd">**All output data you request is place in a newly created folder under your work area called &quot;/plots&quot;.**</span>

<span class="sd">kit_datasheet() performs the following sequence for you:</span>
<span class="sd">  1. Creates a zip file.</span>
<span class="sd">  2. Creates a disposable page.</span>
<span class="sd">  3. Adds one plot that is found on your Page.</span>
<span class="sd">  4. Creates an SVG file of the disposable page and adds it to the zip file.</span>
<span class="sd">  5. Repeats for each plot on your Page. The disposable Page evaporates.</span>
<span class="sd">  6. Creates a PDF of your entire page for reference and dumps it in the zip file.</span>

<span class="sd">If you end up needing more than one page of plots you can add your pages to</span>
<span class="sd">a Multipage_pdf:</span>

<span class="sd">::</span>

<span class="sd">  LTCXXXX_typcurves = Multipage_pdf(&quot;LTCXXXX_typcurves&quot;)</span>
<span class="sd">  LTCXXXX_typcurves.add_page(Page1)</span>
<span class="sd">  LTCXXXX_typcurves.add_page(Page2)</span>
<span class="sd">  LTCXXXX_typcurves.kit_datasheet()</span>

<span class="sd">Multipage_pdfs support the methods:</span>
<span class="sd">  1. kit_datasheet(&quot;LTCXXXX_Page1&quot;)</span>
<span class="sd">  2. create_pdf(&quot;LTCXXXX_Page1&quot;)</span>

<span class="sd">To really get going and find more example see:</span>

<span class="sd">\PyICe\Examples\LTC_plot_example\LTC_plot_example.py</span>

<span class="sd">*** TIP ***</span>
<span class="sd">  If you get a warning about missing Linear fonts and you have them installed,</span>
<span class="sd">  try deleting: &quot;C:\\\\Users\\\\%username%\\\\.matplotlib\\\\fontList.cache and tex.cache&quot;</span>

<span class="sd">&#39;&#39;&#39;</span>


<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span><span class="o">,</span> <span class="nn">matplotlib.ticker</span>
<span class="kn">import</span> <span class="nn">sqlite3</span><span class="o">,</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_pdf</span> <span class="kn">import</span> <span class="n">PdfPages</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_pdf</span> <span class="kn">import</span> <span class="n">FigureCanvasPdf</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_svg</span> <span class="kn">import</span> <span class="n">FigureCanvasSVG</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>
<span class="kn">from</span> <span class="nn">matplotlib.lines</span> <span class="kn">import</span> <span class="n">Line2D</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">StringIO</span>

        
<span class="k">class</span> <span class="nc">PyICe_data_base</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">table_name</span><span class="p">,</span> <span class="n">file_name</span> <span class="o">=</span> <span class="s">&quot;data_log.sqlite&quot;</span><span class="p">):</span>
        <span class="k">print</span> <span class="c">##############################################################</span>
        <span class="k">print</span> <span class="c">#                                                            #</span>
        <span class="k">print</span> <span class="c"># PyICe_data_base() from inside LTC_plot is deprecated.      #</span>
        <span class="k">print</span> <span class="c"># please switch to lab_utils.sqlite_data().                  #</span>
        <span class="k">print</span> <span class="c"># Speak to Steve or Dave for help.                           #</span>
        <span class="k">print</span> <span class="c"># Sorry for the inconvenience.                               #</span>
        <span class="k">print</span> <span class="c">#                                                            #</span>
        <span class="k">print</span> <span class="c">##############################################################</span>
<span class="k">class</span> <span class="nc">plot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_title</span><span class="p">,</span> <span class="n">plot_name</span><span class="p">,</span> <span class="n">xaxis_label</span><span class="p">,</span> <span class="n">yaxis_label</span><span class="p">,</span> <span class="n">xlims</span><span class="p">,</span> <span class="n">ylims</span><span class="p">,</span> <span class="n">xminor</span><span class="p">,</span> <span class="n">xdivs</span><span class="p">,</span> <span class="n">yminor</span><span class="p">,</span> <span class="n">ydivs</span><span class="p">,</span> <span class="n">logx</span><span class="p">,</span> <span class="n">logy</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;A plot is just a record of what you want to plot and how you want it to look.</span>
<span class="sd">        It must be added to a Page before it can be exported.</span>
<span class="sd">        Start by creating as many plots as you like and adding data and various annotations to them.</span>
<span class="sd">        Once you add your plot or plots to a Page you can generate an SVG or PDF of the Page.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_title</span>         <span class="o">=</span> <span class="n">plot_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_name</span>          <span class="o">=</span> <span class="n">plot_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span>        <span class="o">=</span> <span class="n">xaxis_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xlims</span>              <span class="o">=</span> <span class="n">xlims</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xdivs</span>              <span class="o">=</span> <span class="n">xdivs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xminor</span>             <span class="o">=</span> <span class="n">xminor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logx</span>               <span class="o">=</span> <span class="n">logx</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span>              <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arrows</span>             <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span>     <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span>     <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span>          <span class="o">=</span> <span class="s">&quot;regular&quot;</span>
        <span class="k">for</span> <span class="n">y_axis_params</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">]:</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;yaxis_label&quot;</span><span class="p">]</span>    <span class="o">=</span> <span class="n">yaxis_label</span> 
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">]</span>          <span class="o">=</span> <span class="n">ylims</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="n">yminor</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;ydivs&quot;</span><span class="p">]</span>          <span class="o">=</span> <span class="n">ydivs</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;logy&quot;</span><span class="p">]</span>           <span class="o">=</span> <span class="n">logy</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">]</span>     <span class="o">=</span> <span class="bp">True</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;place_legend&quot;</span><span class="p">]</span>   <span class="o">=</span> <span class="bp">False</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;legend_loc&quot;</span><span class="p">]</span>     <span class="o">=</span> <span class="bp">None</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;trace_data&quot;</span><span class="p">]</span>     <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;histo_data&quot;</span><span class="p">]</span>     <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">styles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">style</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span><span class="s">&#39;--&#39;</span><span class="p">,</span><span class="s">&#39;-.&#39;</span><span class="p">,</span><span class="s">&#39;:&#39;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">MARCOM_COLORSfracRGB</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="n">style</span><span class="p">,</span><span class="n">color</span><span class="p">,)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_style_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">add_trace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">marker</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">markersize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">linestyle</span> <span class="o">=</span> <span class="s">&quot;-&quot;</span><span class="p">,</span> <span class="n">legend</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">):</span>
        <span class="n">trace_data</span> <span class="o">=</span> <span class="p">{</span>  <span class="s">&quot;axis&quot;</span>          <span class="p">:</span> <span class="n">axis</span><span class="p">,</span>
                        <span class="s">&quot;data&quot;</span>          <span class="p">:</span> <span class="n">data</span><span class="p">,</span>
                        <span class="s">&quot;color&quot;</span>         <span class="p">:</span> <span class="n">color</span><span class="p">,</span>
                        <span class="s">&quot;marker&quot;</span>        <span class="p">:</span> <span class="n">marker</span><span class="p">,</span>
                        <span class="s">&quot;markersize&quot;</span>    <span class="p">:</span> <span class="n">markersize</span><span class="p">,</span>
                        <span class="s">&quot;linestyle&quot;</span>     <span class="p">:</span> <span class="n">linestyle</span><span class="p">,</span>
                        <span class="s">&quot;legend&quot;</span>        <span class="p">:</span> <span class="n">legend</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="s">u&quot;−&quot;</span><span class="p">)</span>
                     <span class="p">}</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;trace_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;trace_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace_data</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_histogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">xdata</span><span class="p">,</span> <span class="n">num_bins</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">normed</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">legend</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">histo_data</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;axis&quot;</span>           <span class="p">:</span> <span class="n">axis</span><span class="p">,</span>
                       <span class="s">&quot;xdata&quot;</span>          <span class="p">:</span> <span class="n">xdata</span><span class="p">,</span>
                       <span class="s">&quot;num_bins&quot;</span>       <span class="p">:</span> <span class="n">num_bins</span><span class="p">,</span>
                       <span class="s">&quot;color&quot;</span>          <span class="p">:</span> <span class="n">color</span><span class="p">,</span>
                       <span class="s">&quot;normed&quot;</span>         <span class="p">:</span> <span class="n">normed</span><span class="p">,</span>
                       <span class="s">&quot;legend&quot;</span>         <span class="p">:</span> <span class="n">legend</span><span class="p">,</span>
                       <span class="s">&quot;edgecolor&quot;</span>      <span class="p">:</span> <span class="n">edgecolor</span><span class="p">,</span>
                       <span class="s">&quot;linewidth&quot;</span>      <span class="p">:</span> <span class="n">linewidth</span><span class="p">,</span>
                       <span class="s">&quot;alpha&quot;</span>          <span class="p">:</span> <span class="n">alpha</span><span class="p">,</span>
                    <span class="p">}</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;histo_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">histo_data</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;histo_data&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">histo_data</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">make_second_y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">yaxis_label</span><span class="p">,</span> <span class="n">ylims</span><span class="p">,</span> <span class="n">yminor</span><span class="p">,</span> <span class="n">ydivs</span><span class="p">,</span> <span class="n">logy</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;yaxis_label&quot;</span><span class="p">]</span>  <span class="o">=</span> <span class="n">yaxis_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">]</span>        <span class="o">=</span> <span class="n">ylims</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">yminor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ydivs&quot;</span><span class="p">]</span>        <span class="o">=</span> <span class="n">ydivs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;logy&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="n">logy</span>
    <span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">justification</span> <span class="o">=</span> <span class="s">&#39;lower left&#39;</span><span class="p">,</span> <span class="n">use_axes_scale</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;place_legend&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;legend_loc&quot;</span><span class="p">]</span>           <span class="o">=</span> <span class="n">location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;legend_justification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">justification</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">use_axes_scale</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;place_legend&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;legend_loc&quot;</span><span class="p">]</span>           <span class="o">=</span> <span class="n">location</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;legend_justification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">justification</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">use_axes_scale</span>
    <span class="k">def</span> <span class="nf">add_note</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="n">use_axes_scale</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&quot;note&quot;</span> <span class="p">:</span> <span class="n">note</span><span class="p">,</span> <span class="s">&quot;location&quot;</span> <span class="p">:</span> <span class="n">location</span><span class="p">,</span> <span class="s">&quot;use_axes_scale&quot;</span><span class="p">:</span> <span class="n">use_axes_scale</span><span class="p">})</span>
    <span class="k">def</span> <span class="nf">add_arrow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">text_location</span><span class="p">,</span> <span class="n">arrow_tip</span><span class="p">,</span> <span class="n">use_axes_scale</span> <span class="o">=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arrows</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>   <span class="s">&quot;text&quot;</span>           <span class="p">:</span> <span class="n">text</span><span class="p">,</span>
                                <span class="s">&quot;text_location&quot;</span> <span class="p">:</span> <span class="n">text_location</span><span class="p">,</span>
                                <span class="s">&quot;arrow_tip&quot;</span>     <span class="p">:</span> <span class="n">arrow_tip</span><span class="p">,</span>
                                <span class="s">&quot;use_axes_scale&quot;</span><span class="p">:</span> <span class="n">use_axes_scale</span>
                           <span class="p">})</span>
<span class="k">class</span> <span class="nc">scope_plot</span><span class="p">(</span><span class="n">plot</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plot_title</span><span class="p">,</span> <span class="n">plot_name</span><span class="p">,</span> <span class="n">xaxis_label</span><span class="p">,</span> <span class="n">xlims</span><span class="p">,</span> <span class="n">ylims</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;A plot is just a record of what you want to plot and how you want it to look.</span>
<span class="sd">        It must be added to a Page before it can be exported.</span>
<span class="sd">        Start by creating as many plots as you like and adding data and various annotations to them.</span>
<span class="sd">        Once you add your plot or plots to a Page you can generate an SVG or PDF of the Page.&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_title</span>                             <span class="o">=</span> <span class="n">plot_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_name</span>                              <span class="o">=</span> <span class="n">plot_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xaxis_label</span>                            <span class="o">=</span> <span class="n">xaxis_label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xlims</span>                                  <span class="o">=</span> <span class="n">xlims</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xdivs</span>                                  <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xminor</span>                                 <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logx</span>                                   <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notes</span>                                  <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arrows</span>                                 <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ref_markers</span>                            <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_labels</span>                           <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span>                         <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span>                         <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_type</span>                              <span class="o">=</span> <span class="s">&quot;scope_plot&quot;</span>
        <span class="k">for</span> <span class="n">y_axis_params</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">]:</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">]</span>                  <span class="o">=</span> <span class="n">ylims</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span>                 <span class="o">=</span> <span class="bp">None</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;ydivs&quot;</span><span class="p">]</span>                  <span class="o">=</span> <span class="mi">8</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;logy&quot;</span><span class="p">]</span>                   <span class="o">=</span> <span class="bp">False</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">]</span>             <span class="o">=</span> <span class="bp">True</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;place_legend&quot;</span><span class="p">]</span>           <span class="o">=</span> <span class="bp">False</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;legend_loc&quot;</span><span class="p">]</span>             <span class="o">=</span> <span class="bp">None</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;trace_data&quot;</span><span class="p">]</span>             <span class="o">=</span> <span class="p">[]</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;ref_marker_loc&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="mi">0</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;ref_marker_color&quot;</span><span class="p">]</span>       <span class="o">=</span> <span class="n">LT_BLACK</span>
            <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;marker_use_axes_scale&quot;</span><span class="p">]</span>  <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">styles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">style</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;-&#39;</span><span class="p">,</span><span class="s">&#39;--&#39;</span><span class="p">,</span><span class="s">&#39;-.&#39;</span><span class="p">,</span><span class="s">&#39;:&#39;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">MARCOM_COLORSfracRGB</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">styles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span><span class="n">style</span><span class="p">,</span><span class="n">color</span><span class="p">,)</span> <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_style_index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span> <span class="nf">make_second_y_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ylims</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]</span>         <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">]</span>                <span class="o">=</span> <span class="n">ylims</span>
    <span class="k">def</span> <span class="nf">add_ref_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">ylocation</span><span class="p">,</span> <span class="n">marker_color</span><span class="p">,</span> <span class="n">use_axes_scale</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ref_markers</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&quot;axis&quot;</span> <span class="p">:</span> <span class="n">axis</span><span class="p">,</span> <span class="s">&quot;ylocation&quot;</span> <span class="p">:</span> <span class="n">ylocation</span><span class="p">,</span> <span class="s">&quot;marker_color&quot;</span> <span class="p">:</span> <span class="n">marker_color</span><span class="p">,</span> <span class="s">&quot;use_axes_scale&quot;</span><span class="p">:</span> <span class="n">use_axes_scale</span><span class="p">})</span>
    <span class="k">def</span> <span class="nf">add_trace_label</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">trace_label</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">ylocation</span><span class="p">,</span> <span class="n">use_axes_scale</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trace_labels</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s">&quot;trace_label&quot;</span> <span class="p">:</span> <span class="n">trace_label</span><span class="p">,</span> <span class="s">&quot;axis&quot;</span> <span class="p">:</span> <span class="n">axis</span><span class="p">,</span> <span class="s">&quot;ylocation&quot;</span> <span class="p">:</span> <span class="n">ylocation</span><span class="p">,</span> <span class="s">&quot;use_axes_scale&quot;</span><span class="p">:</span> <span class="n">use_axes_scale</span><span class="p">})</span>
<span class="k">class</span> <span class="nc">Page</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rows_x_cols</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">page_size</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span class="n">plot_count</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;A Page containing one or more plots can be exported as a PDF or SVG.</span>
<span class="sd">        Alternately you can kit the page for datasheet submission.</span>
<span class="sd">        This is where the plots are actually &quot;constructed&quot; from matplotlib objects.&#39;&#39;&#39;</span>
        <span class="c">#################################################################</span>
        <span class="c"># Create the matplotlib Figure and do some datasheet setup      #</span>
        <span class="c">#################################################################</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Figure</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">Figure</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">rows_x_cols</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">plot_count</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rows_x_cols</span> <span class="o">=</span> <span class="n">rows_x_cols</span>
        <span class="k">elif</span> <span class="n">rows_x_cols</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">plot_count</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">plot_count</span> <span class="o">&lt;=</span><span class="mi">3</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rows_x_cols</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">plot_count</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rows_x_cols</span> <span class="o">=</span> <span class="p">((</span><span class="n">plot_count</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Specify exactly one of rows_x_cols or plot_count agruments. rows_x_cols should be a two-element list or tuple.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span>      <span class="o">=</span> <span class="n">page_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_list</span>      <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_type</span>      <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">next_position</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;axes.linewidth&#39;</span><span class="p">]</span>           <span class="o">=</span> <span class="mf">0.6</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;font.family&#39;</span><span class="p">]</span>              <span class="o">=</span> <span class="s">&#39;Linear Helv Cond&#39;</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;text.color&#39;</span><span class="p">]</span>               <span class="o">=</span> <span class="n">LT_TEXT</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;axes.labelcolor&#39;</span><span class="p">]</span>          <span class="o">=</span> <span class="n">LT_TEXT</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;svg.fonttype&#39;</span><span class="p">]</span>             <span class="o">=</span> <span class="s">&quot;none&quot;</span>    <span class="c"># Prevents characters from being converted to paths.</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;text.usetex&#39;</span><span class="p">]</span>              <span class="o">=</span> <span class="bp">False</span>     <span class="c"># Not Sure</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;text.latex.unicode&#39;</span><span class="p">]</span>       <span class="o">=</span> <span class="bp">True</span>      <span class="c"># Doesn&#39;t seem to do anything</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;mathtext.default&#39;</span><span class="p">]</span>         <span class="o">=</span> <span class="s">&#39;regular&#39;</span> <span class="c"># Prevents subscripts from changing fonts.</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;axes.unicode_minus&#39;</span><span class="p">]</span>       <span class="o">=</span> <span class="bp">True</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">mathtext</span><span class="o">.</span><span class="n">SHRINK_FACTOR</span>               <span class="o">=</span> <span class="mf">6.0</span><span class="o">/</span><span class="mf">7.0</span>   <span class="c"># Makes subscripts kind of OK</span>
        <span class="n">matplotlib</span><span class="o">.</span><span class="n">mathtext</span><span class="o">.</span><span class="n">GROW_FACTOR</span>                 <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">mathtext</span><span class="o">.</span><span class="n">SHRINK_FACTOR</span>
        <span class="c"># matplotlib.mathtext.GROW_FACTORSUBDROP    = 1         # Didn&#39;t seem to do anything</span>
        <span class="c"># matplotlib.mathtext.GROW_FACTORSUB1       = 1         # Didn&#39;t seem to do anything</span>
    <span class="k">def</span> <span class="nf">LTC_LOG10_Formatter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">add_plot</span><span class="p">(</span>   <span class="bp">self</span><span class="p">,</span> <span class="n">plot</span><span class="p">,</span>
                    <span class="n">position</span>        <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>        <span class="c"># This is if there&#39;s just one plot.</span>
                    <span class="n">plot_sizex</span>      <span class="o">=</span> <span class="mf">11.0</span><span class="o">/</span><span class="mf">6.0</span><span class="p">,</span> <span class="c"># Graphs are exactly 11 pica which is 1/6 of an inch</span>
                    <span class="n">plot_sizey</span>      <span class="o">=</span> <span class="mf">11.0</span><span class="o">/</span><span class="mf">6.0</span><span class="p">,</span> <span class="c"># Graphs are exactly 11 pica which is 1/6 of an inch</span>
                    <span class="n">left_border</span>     <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>      <span class="c"># in inches</span>
                    <span class="n">right_border</span>    <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>      <span class="c"># in inches</span>
                    <span class="n">top_border</span>      <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>      <span class="c"># in inches</span>
                    <span class="n">bottom_border</span>   <span class="o">=</span> <span class="mf">0.7</span><span class="p">,</span>      <span class="c"># in inches</span>
                    <span class="n">x_gap</span>           <span class="o">=</span> <span class="mf">0.8</span><span class="p">,</span>      <span class="c"># in inches</span>
                    <span class="n">y_gap</span>           <span class="o">=</span> <span class="mf">0.8</span><span class="p">):</span>     <span class="c"># in inches</span>
        <span class="c">#################################################################</span>
        <span class="c"># Create subplots                                               #</span>
        <span class="c">#################################################################</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_type</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">page_type</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_type</span> <span class="o">!=</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n\n</span><span class="s">**************************************************</span><span class="se">\n</span><span class="s">Plots of different types not allowed on same page.</span><span class="se">\n</span><span class="s">Please combine only common plot types per page.</span><span class="se">\n</span><span class="s">**************************************************</span><span class="se">\n\n\n</span><span class="s">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">next_position</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">next_position</span> <span class="o">=</span> <span class="n">position</span>
        <span class="n">graph</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rows_x_cols</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows_x_cols</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
        <span class="n">rows</span><span class="p">,</span> <span class="n">columns</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rows_x_cols</span>
        <span class="n">plot_sizex</span> <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">plot_sizex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
            <span class="n">plot_sizey</span>  <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="mf">8.8</span><span class="o">/</span><span class="mf">6.0</span><span class="p">)</span>  <span class="c"># Graphs are exactly 11x8.8 pica which make perfect squares on a 10x8 grid. Bob Reay&#39;s tool uses 8.6667 pica. Not sure why.</span>
            <span class="n">trace_width</span> <span class="o">=</span> <span class="mf">0.6</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot_sizey</span>  <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">plot_sizey</span><span class="p">)</span>
            <span class="n">trace_width</span> <span class="o">=</span> <span class="mf">1.2</span>
        <span class="n">left_border</span>     <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">left_border</span><span class="p">)</span>
        <span class="n">right_border</span>    <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">right_border</span><span class="p">)</span>
        <span class="n">top_border</span>      <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">top_border</span><span class="p">)</span>
        <span class="n">bottom_border</span>   <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">bottom_border</span><span class="p">)</span>
        <span class="n">x_gap</span>           <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">x_gap</span><span class="p">)</span>
        <span class="n">y_gap</span>           <span class="o">=</span>  <span class="nb">float</span><span class="p">(</span><span class="n">y_gap</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">x_gap</span>           <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">columns</span> <span class="o">*</span> <span class="n">plot_sizex</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">columns</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">y_gap</span>           <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">page_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">rows</span> <span class="o">*</span> <span class="n">plot_sizey</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">rows</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">left_border</span>     <span class="o">=</span> <span class="n">x_gap</span>
            <span class="n">right_border</span>    <span class="o">=</span> <span class="n">x_gap</span>
            <span class="n">top_border</span>      <span class="o">=</span> <span class="n">y_gap</span>
            <span class="n">bottom_border</span>   <span class="o">=</span> <span class="n">y_gap</span>
            <span class="n">x_total</span>         <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y_total</span>         <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_total</span> <span class="o">=</span> <span class="n">left_border</span> <span class="o">+</span> <span class="n">right_border</span> <span class="o">+</span> <span class="n">plot_sizex</span> <span class="o">*</span> <span class="n">columns</span> <span class="o">+</span> <span class="n">x_gap</span> <span class="o">*</span> <span class="p">(</span><span class="n">columns</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">y_total</span> <span class="o">=</span> <span class="n">bottom_border</span> <span class="o">+</span> <span class="n">top_border</span> <span class="o">+</span> <span class="n">plot_sizey</span> <span class="o">*</span> <span class="n">rows</span> <span class="o">+</span> <span class="n">y_gap</span> <span class="o">*</span> <span class="p">(</span><span class="n">rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">left</span>        <span class="o">=</span> <span class="n">left_border</span> <span class="o">/</span> <span class="n">x_total</span>
        <span class="n">right</span>       <span class="o">=</span> <span class="p">(</span><span class="n">x_total</span> <span class="o">-</span> <span class="n">right_border</span><span class="p">)</span> <span class="o">/</span> <span class="n">x_total</span>
        <span class="n">bottom</span>      <span class="o">=</span> <span class="n">bottom_border</span> <span class="o">/</span> <span class="n">y_total</span>
        <span class="n">top</span>         <span class="o">=</span> <span class="p">(</span><span class="n">y_total</span> <span class="o">-</span> <span class="n">top_border</span><span class="p">)</span> <span class="o">/</span> <span class="n">y_total</span>
        <span class="n">hspace</span>      <span class="o">=</span> <span class="n">y_gap</span> <span class="o">/</span> <span class="n">plot_sizey</span> <span class="c"># hspace and wspace are percentages of a plot scale</span>
        <span class="n">wspace</span>      <span class="o">=</span> <span class="n">x_gap</span> <span class="o">/</span> <span class="n">plot_sizex</span> <span class="c"># for example, wspace = 1 makes gaps the size of the x dimension of a plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="n">x_total</span><span class="p">,</span> <span class="n">y_total</span><span class="p">)</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">figure</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">right</span><span class="p">,</span> <span class="n">bottom</span> <span class="o">=</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span> <span class="o">=</span> <span class="n">top</span><span class="p">,</span> <span class="n">wspace</span> <span class="o">=</span> <span class="n">wspace</span><span class="p">,</span> <span class="n">hspace</span> <span class="o">=</span> <span class="n">hspace</span><span class="p">)</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">set_axisbelow</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span> <span class="c"># Puts data in front of axes</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_title</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mf">9.5</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s">&quot;bold&quot;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="s">&quot;left&quot;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_title</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mf">9.5</span><span class="p">,</span> <span class="n">fontweight</span> <span class="o">=</span> <span class="s">&quot;bold&quot;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s">&#39;black&#39;</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">You have an older version of matplotlib, consider upgrading to winpython 2.7.6.4</span><span class="se">\n</span><span class="s">&quot;</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([])</span> <span class="c"># Kill the conventional X axis labels</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([])</span> <span class="c"># Kill the conventional Y axis labels</span>
            <span class="c">#Add X label back in as text</span>
            <span class="n">note_props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span> <span class="o">=</span> <span class="s">&#39;square, pad = 0.125&#39;</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">plot</span><span class="o">.</span><span class="n">xaxis_label</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="n">horizontalalignment</span> <span class="o">=</span> <span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span> <span class="o">=</span> <span class="s">&#39;top&#39;</span><span class="p">,</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">note_props</span><span class="p">)</span>
            <span class="c">#Add Y label back in as text</span>
            <span class="c"># graph.text(-0.02, 0.4, plot.y1_axis_params[&quot;yaxis_label&quot;], fontsize = 7, transform = graph.transAxes, horizontalalignment = &#39;right&#39;, verticalalignment = &#39;bottom&#39;, bbox = note_props)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xaxis_label</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;yaxis_label&quot;</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>
        <span class="n">note_props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span> <span class="o">=</span> <span class="s">&#39;square, pad = 0.125&#39;</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">trace_label</span> <span class="ow">in</span> <span class="n">plot</span><span class="o">.</span><span class="n">trace_labels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;axis&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">justification</span> <span class="o">=</span> <span class="s">&quot;right&quot;</span>
                    <span class="k">if</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                        <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transData</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.02</span> <span class="o">*</span> <span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="c"># x = -0.02 / 10 * ()</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.02</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span> <span class="c"># must be axis 2</span>
                    <span class="n">justification</span> <span class="o">=</span> <span class="s">&quot;left&quot;</span>
                    <span class="k">if</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                        <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transData</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                        <span class="c"># x = 1.02 / 10 * ()</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span>
                        <span class="n">x</span> <span class="o">=</span> <span class="mf">1.01</span>
                        <span class="n">y</span> <span class="o">=</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">trace_label</span><span class="p">[</span><span class="s">&quot;trace_label&quot;</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">coordinate_system</span><span class="p">,</span> <span class="n">horizontalalignment</span> <span class="o">=</span> <span class="n">justification</span><span class="p">,</span> <span class="n">verticalalignment</span> <span class="o">=</span> <span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">note_props</span><span class="p">)</span>
        <span class="c">#################################################################</span>
        <span class="c"># Add plot_name in lower right corner                           #</span>
        <span class="c">#################################################################</span>
        <span class="n">plotname_props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span> <span class="o">=</span> <span class="s">&#39;square&#39;</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_name</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span><span class="p">,</span> <span class="n">verticalalignment</span> <span class="o">=</span> <span class="s">&#39;top&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span> <span class="o">=</span> <span class="s">&#39;right&#39;</span><span class="p">,</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">plotname_props</span><span class="p">)</span>
        <span class="c">#############################################################################################</span>
        <span class="c"># Deal with second axis first (seems to keep first axis tick marks from coming back)        #</span>
        <span class="c">#############################################################################################</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]:</span>
            <span class="n">twin</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
                <span class="n">twin</span><span class="o">.</span><span class="n">axes</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_ticklabels</span><span class="p">([])</span> <span class="c"># Kill the conventional Y axis labels</span>
                <span class="c">#Add Y label back in as text</span>
                <span class="c"># note_props = dict(boxstyle = &#39;square, pad = 0.125&#39;, facecolor = &#39;white&#39;, edgecolor = &quot;white&quot;, alpha = 1)</span>
                <span class="c"># twin.text(1.02, 0.4, plot.y2_axis_params[&quot;yaxis_label&quot;], fontsize = 7, transform = twin.transAxes, horizontalalignment = &#39;left&#39;, verticalalignment = &#39;bottom&#39;, bbox = note_props)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">twin</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;yaxis_label&quot;</span><span class="p">],</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="mi">90</span><span class="p">)</span>
            <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">labelpad</span> <span class="o">=</span> <span class="mi">17</span> <span class="c"># TODO, this should be a function of the number of digits in the axes numbers</span>
            <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_majorticklabels</span><span class="p">():</span>
                <span class="n">label</span><span class="o">.</span><span class="n">set_fontsize</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;logy&quot;</span><span class="p">]:</span>
                <span class="n">twin</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">&#39;log&#39;</span><span class="p">)</span>
                <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">LTC_LOG10_Formatter</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
                <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">subs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">subs</span> <span class="o">=</span> <span class="p">[]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;regular&quot;</span><span class="p">:</span>
                    <span class="n">twin</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
                    <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LinearLocator</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ydivs&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                    <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
                        <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]))</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;auto&quot;</span><span class="p">]:</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;autoscale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">twin</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">ymin</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">for</span> <span class="n">tic</span> <span class="ow">in</span> <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
                <span class="n">tic</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">tic</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">for</span> <span class="n">tic</span> <span class="ow">in</span> <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_minor_ticks</span><span class="p">():</span>
                <span class="n">tic</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">tic</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">for</span> <span class="n">tic</span> <span class="ow">in</span> <span class="n">twin</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
                <span class="n">tic</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="bp">False</span>
                <span class="n">tic</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c">#################################################################</span>
        <span class="c"># Deal with first axis limits                                   #</span>
        <span class="c">#################################################################</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;auto&quot;</span><span class="p">]:</span>
            <span class="n">autoscalex</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">autoscalex</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">xmin</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xmax</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="s">&quot;auto&quot;</span><span class="p">]:</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">ymin</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">ymax</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;ylims&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">logx</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">&#39;log&#39;</span><span class="p">)</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">LTC_LOG10_Formatter</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">xminor</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">subs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">subs</span> <span class="o">=</span> <span class="p">[]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LinearLocator</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xdivs</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;regular&quot;</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">get_xaxis</span><span class="p">()</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">xminor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
                    <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xminor</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;logy&quot;</span><span class="p">]:</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">set_yscale</span><span class="p">(</span><span class="s">&#39;log&#39;</span><span class="p">)</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">FuncFormatter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">LTC_LOG10_Formatter</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">subs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LogLocator</span><span class="p">(</span><span class="n">subs</span> <span class="o">=</span> <span class="p">[]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;regular&quot;</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()</span><span class="o">.</span><span class="n">set_useOffset</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">LinearLocator</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;ydivs&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">None</span><span class="p">,</span> <span class="mi">0</span><span class="p">]:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_minor_locator</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">ticker</span><span class="o">.</span><span class="n">AutoMinorLocator</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;yminor&quot;</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
            <span class="n">grid_color</span> <span class="o">=</span> <span class="n">LT_SCOPE_GRID</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">grid_color</span> <span class="o">=</span> <span class="n">LT_GRID</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">b</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">which</span> <span class="o">=</span> <span class="s">&#39;both&#39;</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">grid_color</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span> <span class="mf">0.35</span><span class="p">)</span>
        <span class="n">graph</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="s">&#39;both&#39;</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="n">LT_GRID</span><span class="p">,</span> <span class="n">gridOn</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">tick1On</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">tick2On</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">labelsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">labelcolor</span> <span class="o">=</span> <span class="n">LT_TEXT</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
            <span class="n">TIC_LENGTH</span> <span class="o">=</span> <span class="mf">0.00644</span> <span class="c"># percentage of graph width</span>
            <span class="c"># Make my own Y axis tics manually</span>
            <span class="k">for</span> <span class="n">major</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">):</span> <span class="c"># 0..7</span>
                <span class="k">for</span> <span class="n">minor</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span> <span class="c"># 1..4</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.5</span> <span class="o">-</span> <span class="n">TIC_LENGTH</span><span class="p">,</span> <span class="n">major</span><span class="o">/</span><span class="mf">8.</span> <span class="o">+</span> <span class="n">minor</span><span class="o">/</span><span class="mf">40.</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.5</span> <span class="o">+</span> <span class="n">TIC_LENGTH</span><span class="p">,</span> <span class="n">major</span><span class="o">/</span><span class="mf">8.</span> <span class="o">+</span> <span class="n">minor</span><span class="o">/</span><span class="mf">40.</span><span class="p">)]</span>
                    <span class="p">(</span><span class="n">line_xs</span><span class="p">,</span> <span class="n">line_ys</span><span class="p">)</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="p">)</span>
                    <span class="n">graph</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">line_xs</span><span class="p">,</span> <span class="n">line_ys</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">LT_SCOPE_GRID</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span><span class="p">))</span>
            <span class="c"># Make my own X axis tics manually</span>
            <span class="k">for</span> <span class="n">major</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span> <span class="c"># 0..9</span>
                <span class="k">for</span> <span class="n">minor</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span> <span class="c"># 1..4</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="p">[(</span><span class="n">major</span><span class="o">/</span><span class="mf">10.</span> <span class="o">+</span> <span class="n">minor</span><span class="o">/</span><span class="mf">50.</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">TIC_LENGTH</span><span class="p">),</span> <span class="p">(</span> <span class="n">major</span><span class="o">/</span><span class="mf">10.</span> <span class="o">+</span> <span class="n">minor</span><span class="o">/</span><span class="mf">50.</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">TIC_LENGTH</span><span class="p">)]</span>
                    <span class="p">(</span><span class="n">line_xs</span><span class="p">,</span> <span class="n">line_ys</span><span class="p">)</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="p">)</span>
                    <span class="n">graph</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">Line2D</span><span class="p">(</span><span class="n">line_xs</span><span class="p">,</span> <span class="n">line_ys</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">LT_SCOPE_GRID</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">tic</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
            <span class="n">tic</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">tic</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">tic</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_ticks</span><span class="p">():</span>
            <span class="n">tic</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">tic</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="c">#################################################################</span>
        <span class="c"># Add the data                                                  #</span>
        <span class="c">#################################################################</span>
        <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;axis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">graph</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]:</span>
            <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;axis&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">twin</span>
        <span class="k">for</span> <span class="n">y_axis_params</span> <span class="ow">in</span> <span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">,</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;axis_is_used&quot;</span><span class="p">]:</span>
                <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;trace_data&quot;</span><span class="p">]:</span>
                    <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;axis&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>         <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">trace</span><span class="p">[</span><span class="s">&quot;data&quot;</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span>
                                                        <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">trace</span><span class="p">[</span><span class="s">&quot;data&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">],</span>
                                        <span class="n">color</span>           <span class="o">=</span> <span class="n">trace</span><span class="p">[</span><span class="s">&quot;color&quot;</span><span class="p">],</span>
                                        <span class="n">linewidth</span>       <span class="o">=</span> <span class="n">trace_width</span><span class="p">,</span>
                                        <span class="n">marker</span>          <span class="o">=</span> <span class="n">trace</span><span class="p">[</span><span class="s">&quot;marker&quot;</span><span class="p">],</span>
                                        <span class="n">markersize</span>      <span class="o">=</span> <span class="n">trace</span><span class="p">[</span><span class="s">&quot;markersize&quot;</span><span class="p">],</span>
                                        <span class="n">label</span>           <span class="o">=</span> <span class="n">trace</span><span class="p">[</span><span class="s">&quot;legend&quot;</span><span class="p">],</span>
                                        <span class="n">linestyle</span>       <span class="o">=</span> <span class="n">trace</span><span class="p">[</span><span class="s">&quot;linestyle&quot;</span><span class="p">],</span>
                                        <span class="n">alpha</span>           <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                                        <span class="n">scalex</span>          <span class="o">=</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">],</span>
                                        <span class="n">scaley</span>          <span class="o">=</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;autoscaley&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">!=</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">histogram</span> <span class="ow">in</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;histo_data&quot;</span><span class="p">]:</span>
                        <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;axis&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>  <span class="n">x</span>  <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;xdata&quot;</span><span class="p">],</span>
                                            <span class="n">bins</span>        <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;num_bins&quot;</span><span class="p">],</span>
                                            <span class="nb">range</span>       <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                                            <span class="n">normed</span>      <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;normed&quot;</span><span class="p">],</span>
                                            <span class="n">weights</span>     <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                                            <span class="n">cumulative</span>  <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="n">bottom</span>      <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                                            <span class="n">histtype</span>    <span class="o">=</span> <span class="s">&#39;bar&#39;</span><span class="p">,</span>
                                            <span class="n">align</span>       <span class="o">=</span> <span class="s">&#39;mid&#39;</span><span class="p">,</span>
                                            <span class="n">orientation</span> <span class="o">=</span> <span class="s">&#39;vertical&#39;</span><span class="p">,</span>
                                            <span class="n">rwidth</span>      <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
                                            <span class="n">log</span>         <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="n">color</span>       <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;color&quot;</span><span class="p">],</span>
                                            <span class="n">label</span>       <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;legend&quot;</span><span class="p">],</span>
                                            <span class="n">stacked</span>     <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
                                            <span class="n">linewidth</span>   <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;linewidth&quot;</span><span class="p">],</span>
                                            <span class="n">alpha</span>       <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;alpha&quot;</span><span class="p">],</span>
                                            <span class="n">edgecolor</span>   <span class="o">=</span> <span class="n">histogram</span><span class="p">[</span><span class="s">&quot;edgecolor&quot;</span><span class="p">])</span>
        <span class="c">#################################################################</span>
        <span class="c"># Place the legends                                             #</span>
        <span class="c">#################################################################</span>
                <span class="k">if</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;place_legend&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">y_axis_params</span> <span class="o">==</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]:</span>
                            <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transData</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span>
                    <span class="k">if</span> <span class="n">y_axis_params</span> <span class="o">==</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]:</span>
                            <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transData</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span>
                    <span class="n">legend</span> <span class="o">=</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;axis&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;legend_justification&quot;</span><span class="p">],</span> <span class="n">bbox_to_anchor</span> <span class="o">=</span> <span class="n">y_axis_params</span><span class="p">[</span><span class="s">&quot;legend_loc&quot;</span><span class="p">],</span> <span class="n">framealpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">borderpad</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">,</span> <span class="n">bbox_transform</span> <span class="o">=</span> <span class="n">coordinate_system</span><span class="p">)</span>
                    <span class="n">legend</span><span class="o">.</span><span class="n">get_frame</span><span class="p">()</span><span class="o">.</span><span class="n">set_linewidth</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="c">#################################################################</span>
        <span class="c"># Add the reference marker (scope_plot only)                    #</span>
        <span class="c">#################################################################</span>
                <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_type</span> <span class="o">==</span> <span class="s">&quot;scope_plot&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">ref_marker</span> <span class="ow">in</span> <span class="n">plot</span><span class="o">.</span><span class="n">ref_markers</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]:</span>
                            <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transData</span>
                            <span class="k">if</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&#39;axis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                                <span class="n">y</span> <span class="o">=</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.03</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">plot</span><span class="o">.</span><span class="n">y1_axis_params</span><span class="p">[</span><span class="s">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                                <span class="n">marker</span> <span class="o">=</span> <span class="s">u&quot;►&quot;</span>
                            <span class="k">else</span><span class="p">:</span> <span class="c"># must be second y axis</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.038</span> <span class="o">*</span> <span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">plot</span><span class="o">.</span><span class="n">xlims</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c"># Not sure why offset is needed, text arrow not centered with its bbox?</span>
                                <span class="n">y</span> <span class="o">=</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.03</span> <span class="o">/</span> <span class="mi">8</span> <span class="o">*</span> <span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">plot</span><span class="o">.</span><span class="n">y2_axis_params</span><span class="p">[</span><span class="s">&#39;ylims&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
                                <span class="n">marker</span> <span class="o">=</span> <span class="s">u&quot;◄&quot;</span>
                        <span class="k">else</span><span class="p">:</span> <span class="c"># must be absolute scale (0 - 1)</span>
                            <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span>
                            <span class="k">if</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&#39;axis&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
                                <span class="n">marker</span> <span class="o">=</span> <span class="s">u&quot;►&quot;</span>
                            <span class="k">else</span><span class="p">:</span> <span class="c"># must be second y axis</span>
                                <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="mf">0.038</span>                                               <span class="c"># Not sure why offset is needed, text arrow not centered with its bbox?</span>
                                <span class="n">marker</span> <span class="o">=</span> <span class="s">u&quot;◄&quot;</span>
                            <span class="n">y</span> <span class="o">=</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&quot;ylocation&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mf">0.0038</span>                            <span class="c"># Not sure why offset is needed, text arrow not centered with its bbox?</span>
                        <span class="n">note_props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span> <span class="o">=</span> <span class="s">&#39;square, pad = 0.125&#39;</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="n">color</span> <span class="o">=</span> <span class="n">ref_marker</span><span class="p">[</span><span class="s">&quot;marker_color&quot;</span><span class="p">]</span>
                        <span class="n">graph</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">marker</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="n">color</span><span class="p">,</span> <span class="n">family</span> <span class="o">=</span> <span class="s">&#39;Arial&#39;</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">coordinate_system</span><span class="p">,</span> <span class="n">horizontalalignment</span> <span class="o">=</span> <span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span> <span class="o">=</span> <span class="s">&#39;center&#39;</span><span class="p">,</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">note_props</span><span class="p">)</span>
        <span class="c">#################################################################</span>
        <span class="c"># Add the notes                                                 #</span>
        <span class="c">#################################################################</span>
        <span class="n">note_props</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span> <span class="o">=</span> <span class="s">&#39;square, pad = 0.125&#39;</span><span class="p">,</span> <span class="n">facecolor</span> <span class="o">=</span> <span class="s">&#39;white&#39;</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span> <span class="n">alpha</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">note_dict</span> <span class="ow">in</span> <span class="n">plot</span><span class="o">.</span><span class="n">notes</span><span class="p">:</span>
            <span class="n">note</span>    <span class="o">=</span> <span class="n">note_dict</span><span class="p">[</span><span class="s">&quot;note&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;-&quot;</span><span class="p">,</span><span class="s">u&quot;-&quot;</span><span class="p">)</span>
            <span class="n">x</span>       <span class="o">=</span> <span class="n">note_dict</span><span class="p">[</span><span class="s">&quot;location&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">y</span>       <span class="o">=</span> <span class="n">note_dict</span><span class="p">[</span><span class="s">&quot;location&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">note_dict</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]:</span>
                <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transData</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">coordinate_system</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">transAxes</span>
            <span class="n">graph</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">note</span><span class="p">,</span> <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">7</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">coordinate_system</span><span class="p">,</span> <span class="n">horizontalalignment</span> <span class="o">=</span> <span class="s">&#39;left&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span> <span class="o">=</span> <span class="s">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">bbox</span> <span class="o">=</span> <span class="n">note_props</span><span class="p">)</span>
        <span class="c">#################################################################</span>
        <span class="c"># Add the arrows (matplotlib &quot;annotation&quot;)                      #</span>
        <span class="c">#################################################################</span>
        <span class="c"># White Stripe, useless arrowhead</span>
        <span class="n">arrowprops1</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span>    <span class="o">=</span> <span class="s">&quot;-|&gt;, head_length=0, head_width=1e-37&quot;</span><span class="p">,</span>
                                <span class="n">connectionstyle</span> <span class="o">=</span> <span class="s">&quot;arc3, rad = 0&quot;</span><span class="p">,</span>
                                <span class="n">facecolor</span>       <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
                                <span class="n">edgecolor</span>       <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
                                <span class="n">linewidth</span>       <span class="o">=</span> <span class="mf">1.4</span>
                                <span class="p">)</span>
        <span class="c"># Main arrow and head</span>
        <span class="n">arrowprops2</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span>    <span class="o">=</span> <span class="s">&quot;-|&gt;, head_length=0.8, head_width=0.24&quot;</span><span class="p">,</span>
                                <span class="n">connectionstyle</span> <span class="o">=</span> <span class="s">&quot;arc3, rad = 0&quot;</span><span class="p">,</span>
                                <span class="n">facecolor</span>       <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span>
                                <span class="n">edgecolor</span>       <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
                                <span class="n">linewidth</span>       <span class="o">=</span> <span class="mi">0</span>
                                <span class="p">)</span>
        <span class="c"># Offset white arrow over top to make the &quot;barb&quot;</span>
        <span class="n">arrowprops3</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span>    <span class="o">=</span> <span class="s">&quot;-|&gt;, head_length=0.2, head_width=0.31&quot;</span><span class="p">,</span>
                                <span class="n">connectionstyle</span> <span class="o">=</span> <span class="s">&quot;arc3, rad = 0&quot;</span><span class="p">,</span>
                                <span class="n">facecolor</span>       <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
                                <span class="n">edgecolor</span>       <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span>
                                <span class="n">linewidth</span>       <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="n">shrinkA</span>         <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="n">shrinkB</span>         <span class="o">=</span> <span class="mf">6.5</span><span class="p">,</span>
                                <span class="n">alpha</span>           <span class="o">=</span> <span class="mi">1</span> <span class="c"># change this to barb arrow.</span>
                                <span class="p">)</span>
        <span class="c"># Rebuild black line, skip arrow head</span>
        <span class="n">arrowprops4</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">arrowstyle</span>    <span class="o">=</span> <span class="s">&quot;-|&gt;, head_length=0, head_width=1e-37&quot;</span><span class="p">,</span>
                                <span class="n">connectionstyle</span> <span class="o">=</span> <span class="s">&quot;arc3, rad = 0&quot;</span><span class="p">,</span>
                                <span class="n">facecolor</span>       <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span>
                                <span class="n">edgecolor</span>       <span class="o">=</span> <span class="s">&quot;black&quot;</span><span class="p">,</span>
                                <span class="n">linewidth</span>       <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span>
                                <span class="n">shrinkA</span>         <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                                <span class="n">shrinkB</span>         <span class="o">=</span> <span class="mi">5</span>
                                <span class="p">)</span>
        <span class="n">arrowprops</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">arrowprops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrowprops1</span><span class="p">)</span>
        <span class="n">arrowprops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrowprops2</span><span class="p">)</span>
        <span class="n">arrowprops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrowprops3</span><span class="p">)</span>
        <span class="n">arrowprops</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">arrowprops4</span><span class="p">)</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">boxstyle</span>            <span class="o">=</span> <span class="s">&quot;square, pad = -0.05&quot;</span><span class="p">,</span>
                    <span class="n">facecolor</span>           <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">,</span>
                    <span class="n">edgecolor</span>           <span class="o">=</span> <span class="s">&quot;white&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">arrow_dict</span> <span class="ow">in</span> <span class="n">plot</span><span class="o">.</span><span class="n">arrows</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">arrow_dict</span><span class="p">[</span><span class="s">&quot;use_axes_scale&quot;</span><span class="p">]:</span>
                <span class="n">coordinate_system</span> <span class="o">=</span> <span class="s">&quot;data&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">coordinate_system</span> <span class="o">=</span> <span class="s">&quot;axes fraction&quot;</span>
            <span class="n">text</span>            <span class="o">=</span> <span class="n">arrow_dict</span><span class="p">[</span><span class="s">&quot;text&quot;</span><span class="p">]</span>
            <span class="n">arrow_tip</span>       <span class="o">=</span> <span class="n">arrow_dict</span><span class="p">[</span><span class="s">&quot;arrow_tip&quot;</span><span class="p">]</span>
            <span class="n">text_location</span>   <span class="o">=</span> <span class="n">arrow_dict</span><span class="p">[</span><span class="s">&quot;text_location&quot;</span><span class="p">]</span>
                            
            <span class="k">for</span> <span class="n">arrowprop</span> <span class="ow">in</span> <span class="n">arrowprops</span><span class="p">:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span> <span class="n">text</span><span class="p">,</span>
                                <span class="n">xy</span>          <span class="o">=</span> <span class="n">arrow_tip</span><span class="p">,</span>
                                <span class="n">xycoords</span>    <span class="o">=</span> <span class="n">coordinate_system</span><span class="p">,</span>
                                <span class="n">xytext</span>      <span class="o">=</span> <span class="n">text_location</span><span class="p">,</span>
                                <span class="n">textcoords</span>  <span class="o">=</span> <span class="n">coordinate_system</span><span class="p">,</span>
                                <span class="n">arrowprops</span>  <span class="o">=</span> <span class="n">arrowprop</span><span class="p">,</span>
                                <span class="n">bbox</span>        <span class="o">=</span> <span class="n">bbox</span><span class="p">,</span>
                                <span class="n">size</span>        <span class="o">=</span> <span class="mi">7</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_svg</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_basename</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="s">&#39;./plots/&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">FigureCanvasSVG</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Figure</span><span class="p">)</span>
        <span class="n">figdata</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">figdata</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&quot;svg&quot;</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">figdata</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;Linear Helv Cond&quot;</span><span class="p">,</span> <span class="s">&quot;LinearHelvCond&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;font-size:9.5px;font-style:normal&quot;</span><span class="p">,</span> <span class="s">&quot;font-size:9.5px;font-weight:bold&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;font-size:8.14285714286px;font-style:bold&quot;</span><span class="p">,</span> <span class="s">&quot;font-size:8.14285714286px;font-weight:bold&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot;font-size:9.5px;font-style:bold&quot;</span><span class="p">,</span> <span class="s">&quot;font-size:9.5px;font-weight:bold&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">file_basename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">file_basename</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s">&quot;{}.svg&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="p">)</span>
            <span class="n">output_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_basename</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
            <span class="n">output_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
            <span class="n">output_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">output</span>
    <span class="k">def</span> <span class="nf">create_pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_basename</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">file_basename</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s">&quot;{}.pdf&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">FigureCanvasPdf</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Figure</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">file_basename</span><span class="p">,</span> <span class="n">format</span><span class="o">=</span><span class="s">&quot;pdf&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">kit_datasheet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_basename</span> <span class="o">=</span> <span class="s">&quot;datasheet_kit&quot;</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="s">&#39;{}</span><span class="se">\\</span><span class="s">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">filepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Kitting datasheet plots in .</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\\n</span><span class="s">&quot;</span>
        <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_list</span><span class="p">:</span>
            <span class="n">plot_name</span> <span class="o">=</span> <span class="s">&quot;{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_name</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="p">)</span>
            <span class="n">DummyPage</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="n">rows_x_cols</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
            <span class="n">DummyPage</span><span class="o">.</span><span class="n">add_plot</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
            <span class="n">DummyPage</span><span class="o">.</span><span class="n">create_svg</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="n">plot_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_pdf</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\\</span><span class="s">{}</span><span class="se">\\</span><span class="s">PDFView&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">))</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">),</span> <span class="s">&#39;zip&#39;</span><span class="p">,</span> <span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">filepath</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">))</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Wrote file: {}.zip</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">)</span>
        
<div class="viewcode-block" id="Multipage_pdf"><a class="viewcode-back" href="../../_autosummary/PyICe.LTC_plot.html#PyICe.LTC_plot.Multipage_pdf">[docs]</a><span class="k">class</span> <span class="nc">Multipage_pdf</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;Add one or more Pages to a Multipage_pdf to keep your page sizes manageable (such as 8.5x11).</span>
<span class="sd">    Multipage_pdf also support kit_datasheet().&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">def</span> <span class="nf">add_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page</span><span class="p">):</span>
        <span class="n">FigureCanvasPdf</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">Figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">create_pdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_basename</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">&#39;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">filepath</span> <span class="o">+</span> <span class="s">&quot;{}.pdf&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">filepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf_file</span> <span class="o">=</span> <span class="n">PdfPages</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_list</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pdf_file</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">Figure</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pdf_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">kit_datasheet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_basename</span> <span class="o">=</span> <span class="s">&quot;datasheet_kit&quot;</span><span class="p">):</span>
        <span class="n">filepath</span> <span class="o">=</span> <span class="s">&#39;datasheet_kit</span><span class="se">\\</span><span class="s">&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">filepath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Kitting datasheet plots in .</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\\n</span><span class="s">&quot;</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">page_list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">plot</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">plot_list</span><span class="p">)):</span>
                <span class="n">plot_name</span> <span class="o">=</span> <span class="s">&quot;{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">plot_list</span><span class="p">[</span><span class="n">plot</span><span class="p">]</span><span class="o">.</span><span class="n">plot_name</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="p">)</span>
                <span class="n">DummyPage</span> <span class="o">=</span> <span class="n">Page</span><span class="p">(</span><span class="n">rows_x_cols</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
                <span class="n">DummyPage</span><span class="o">.</span><span class="n">add_plot</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">plot_list</span><span class="p">[</span><span class="n">plot</span><span class="p">])</span>
                <span class="n">DummyPage</span><span class="o">.</span><span class="n">create_svg</span><span class="p">(</span><span class="n">filepath</span> <span class="o">+</span> <span class="n">plot_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_pdf</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\\</span><span class="s">datasheet_kit</span><span class="se">\\</span><span class="s">PDFView&quot;</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">make_archive</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">),</span> <span class="s">&#39;zip&#39;</span><span class="p">,</span> <span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">&#39;</span> <span class="o">+</span> <span class="n">filepath</span><span class="p">)</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="s">&#39;.</span><span class="se">\\</span><span class="s">plots</span><span class="se">\\</span><span class="s">datasheet_kit&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n</span><span class="s">Wrote file: {}.zip</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_basename</span><span class="p">)</span>
        </div>
<div class="viewcode-block" id="color_gen"><a class="viewcode-back" href="../../_autosummary/PyICe.LTC_plot.html#PyICe.LTC_plot.color_gen">[docs]</a><span class="k">class</span> <span class="nc">color_gen</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Color yielding generator. Returns a new color each time an instance is called&#39;&#39;&#39;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rollover</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;set rollover False to cause an IndexError exception when colors are exhausted&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colors</span> <span class="o">=</span> <span class="n">MARCOM_COLORSfracRGB</span><span class="p">[:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rollover</span> <span class="o">=</span> <span class="n">rollover</span>
    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">rollover</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">%=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colors</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">color</span>
<div class="viewcode-block" id="color_gen.reset"><a class="viewcode-back" href="../../_autosummary/PyICe.LTC_plot.html#PyICe.LTC_plot.color_gen.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;start color sequence over&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>

</div></div>
<div class="viewcode-block" id="list_markers"><a class="viewcode-back" href="../../_autosummary/PyICe.LTC_plot.html#PyICe.LTC_plot.list_markers">[docs]</a><span class="k">def</span> <span class="nf">list_markers</span><span class="p">():</span>
    <span class="sd">&#39;&#39;&#39;Valid linestyles are [&#39;-&#39; &#39;--&#39; &#39;-.&#39; &#39;:&#39; &#39;None&#39; &#39; &#39; &#39;&#39;]</span>
<span class="sd">    Valid markers are [&#39;:&#39; &#39;.&#39; &#39;,&#39; &#39;o&#39; &#39;v&#39; &#39;^&#39; &#39;&lt;&#39; &#39;&gt;&#39; &#39;1&#39; &#39;2&#39; &#39;3&#39; &#39;4&#39; &#39;8&#39; &#39;s&#39; &#39;p&#39; &#39;*&#39; &#39;h&#39; &#39;H&#39; &#39;+&#39; &#39;x&#39; &#39;D&#39; &#39;d&#39; &#39;|&#39; &#39;_&#39; TICKLEFT TICKRIGHT TICKUP TICKDOWN CARETLEFT CARETRIGHT CARETUP CARETDOWN]&#39;&#39;&#39;</span>
    <span class="k">print</span>
    <span class="k">print</span> <span class="s">&quot;Valid markers are: &quot;</span> <span class="o">+</span> <span class="s">&quot;[&#39;:&#39; &#39;.&#39; &#39;,&#39; &#39;o&#39; &#39;v&#39; &#39;^&#39; &#39;&lt;&#39; &#39;&gt;&#39; &#39;1&#39; &#39;2&#39; &#39;3&#39; &#39;4&#39; &#39;8&#39; &#39;s&#39; &#39;p&#39; &#39;*&#39; &#39;h&#39; &#39;H&#39; &#39;+&#39; &#39;x&#39; &#39;D&#39; &#39;d&#39; &#39;|&#39; &#39;_&#39; TICKLEFT TICKRIGHT TICKUP TICKDOWN CARETLEFT CARETRIGHT CARETUP CARETDOWN]&quot;</span>
    <span class="k">print</span>
    <span class="k">print</span> <span class="s">&quot;Valid linestyles are: &quot;</span> <span class="o">+</span> <span class="s">&quot;[&#39;-&#39; &#39;--&#39; &#39;-.&#39; &#39;:&#39; &#39;None&#39; &#39; &#39; &#39;&#39;]&quot;</span>
    <span class="k">print</span></div>
<span class="k">def</span> <span class="nf">smooth</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;##########################################################&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#                                                        #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#  WARNING, LTC_plot.smooth() is deprecated!!!           #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#  Please create a lab_utils.ordered_pair()              #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#  and use its better supported smoothing feature.       #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#                                                        #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;##########################################################&quot;</span>
    <span class="c"># exit()</span>
    <span class="c"># data = window * [data[0]] + list(data) + window * [data[-1]]            # Extend data end points left/right</span>
    <span class="c"># data = np.convolve(data, np.ones(int(window))/float(window), &#39;same&#39;)    # to assist running average algorithm</span>
    <span class="c"># data = data.ravel().tolist()                                            # Convert array to list</span>
    <span class="c"># data[0:window] = []                                                     # Strip off left padding</span>
    <span class="c"># data[len(data)-window:] = []                                            # Strip off right padding</span>
    <span class="c"># return data</span>
<span class="k">def</span> <span class="nf">smooth_y_vector</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">window</span> <span class="o">=</span> <span class="mi">5</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;##########################################################&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#                                                        #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#  WARNING, LTC_plot.smooth_y_vector() is deprecated!!!  #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#  Please create a lab_utils.ordered_pair()              #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#  and use its better supported smoothing feature.       #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;#                                                        #&quot;</span>
    <span class="k">print</span> <span class="s">&quot;##########################################################&quot;</span>
    <span class="c"># xdata, ydata = zip(*data)</span>
    <span class="c"># ydata = smooth(ydata, window)</span>
    <span class="c"># return zip(xdata, ydata)</span>
<span class="k">def</span> <span class="nf">data_from_file</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">input_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">input_file</span><span class="p">:</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&quot;,&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">input_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">CMYK_to_fracRGB</span><span class="p">(</span><span class="n">CMYK</span><span class="p">):</span>
    <span class="n">R</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">CMYK</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">CMYK</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">G</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">CMYK</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">CMYK</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="n">B</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">CMYK</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">CMYK</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fracRGB_to_CMYK</span><span class="p">(</span><span class="n">RGB</span><span class="p">):</span>
    <span class="n">C</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">RGB</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">M</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">RGB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">Y</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">RGB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">K</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="n">Y</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">K</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">):</span> <span class="c"># Really Black</span>
        <span class="n">C</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">M</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Y</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">else</span><span class="p">:</span>
       <span class="n">C</span> <span class="o">=</span> <span class="p">(</span> <span class="n">C</span> <span class="o">-</span> <span class="n">K</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">K</span> <span class="p">)</span>
       <span class="n">M</span> <span class="o">=</span> <span class="p">(</span> <span class="n">M</span> <span class="o">-</span> <span class="n">K</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">K</span> <span class="p">)</span>
       <span class="n">Y</span> <span class="o">=</span> <span class="p">(</span> <span class="n">Y</span> <span class="o">-</span> <span class="n">K</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">K</span> <span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">M</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">K</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">webRGB</span><span class="p">):</span>
    <span class="n">R</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">webRGB</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span><span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>
    <span class="n">G</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">webRGB</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span><span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>
    <span class="n">B</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">webRGB</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">],</span><span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="mf">255.0</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">webRGB_to_RGB</span><span class="p">(</span><span class="n">webRGB</span><span class="p">):</span>
    <span class="n">R</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">webRGB</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">G</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">webRGB</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">B</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">webRGB</span><span class="p">[</span><span class="mi">4</span><span class="p">:</span><span class="mi">6</span><span class="p">],</span><span class="mi">16</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">RGB_to_webRGB</span><span class="p">(</span><span class="n">RGB</span><span class="p">):</span>
    <span class="n">R</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">RGB</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
    <span class="n">G</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">RGB</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
    <span class="n">B</span> <span class="o">=</span> <span class="nb">hex</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">RGB</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fracRGB_to_RGB</span><span class="p">(</span><span class="n">fracRGB</span><span class="p">):</span>
    <span class="n">R</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">fracRGB</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mf">255.0</span><span class="p">))</span>
    <span class="n">G</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">fracRGB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mf">255.0</span><span class="p">))</span>
    <span class="n">B</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">fracRGB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="mf">255.0</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">RGB_to_fracRGB</span><span class="p">(</span><span class="n">RGB</span><span class="p">):</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">RGB</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">255.0</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">RGB</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mf">255.0</span>
    <span class="n">B</span> <span class="o">=</span> <span class="n">RGB</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">255.0</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fracRGB_to_webRGB</span><span class="p">(</span><span class="n">fracRGB</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">RGB_to_webRGB</span><span class="p">(</span><span class="n">fracRGB_to_RGB</span><span class="p">(</span><span class="n">fracRGB</span><span class="p">))</span>
    
<span class="k">def</span> <span class="nf">_escape_attrib_reversal</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
    <span class="c"># Don&#39;t know why SVG backend does this, need to reverse it to include html entities.</span>
    <span class="c"># 12/26/2016 Bill had complained that he couldn&#39;t use &amp; character which as true because the I had the next line uncommented.</span>
    <span class="c"># This was here to accommodate html entities exactly such as include and &amp; but in retrospect this was a bad idea.</span>
    <span class="c"># It&#39;s easier to just declare the text unicode by preceding the text with a u such as u&quot;Ω&quot; rather than &amp;#937;.</span>
    <span class="c"># s = s.replace(&quot;&amp;amp;&quot;, &quot;&amp;&quot;)</span>
    <span class="c"># s = s.replace(u&quot;&amp;apos;&quot;, u&quot;&#39;&quot;)</span>
    <span class="c"># s = s.replace(u&quot;&amp;quot;&quot;, u&quot;\&quot;&quot;)</span>
    <span class="c"># s = s.replace(u&quot;&amp;lt;&quot;, u&quot;&lt;&quot;)</span>
    <span class="c"># s = s.replace(u&quot;&amp;gt;&quot;, u&quot;&gt;&quot;)</span>
    <span class="k">return</span> <span class="n">s</span>
    
<span class="c"># These are the Reay colors and they don&#39;t match the CMYK values using the simple transforms above.</span>
<span class="c"># They look like they were pulled out of the &quot;GSM Complete Book 0315.pdf&quot; with a color picker program like pain.</span>
<span class="c"># I found them to be with a few codes using that method. The spec doesn&#39;t have RGB values for the secondary colors</span>
<span class="c"># so I have Reay&#39;s colors here.</span>
<span class="c"># Bob also had the text color and black trace color as 231f20 which is kind of grey.</span>
<span class="n">REAY_COLORS</span> <span class="o">=</span>   <span class="p">[</span><span class="s">&quot;900027&quot;</span><span class="p">,</span> <span class="s">&quot;3a52a4&quot;</span><span class="p">,</span> <span class="s">&quot;36864b&quot;</span><span class="p">,</span> <span class="s">&quot;b57233&quot;</span><span class="p">,</span> <span class="s">&quot;000000&quot;</span><span class="p">,</span> <span class="s">&quot;da2031&quot;</span><span class="p">,</span> <span class="s">&quot;cdb33c&quot;</span><span class="p">,</span> <span class="s">&quot;537ebc&quot;</span><span class="p">,</span> <span class="s">&quot;cc7b4a&quot;</span><span class="p">,</span> <span class="s">&quot;40ad48&quot;</span><span class="p">]</span>
<span class="n">MARCOM_COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;990033&quot;</span><span class="p">,</span> <span class="s">&quot;336699&quot;</span><span class="p">,</span> <span class="s">&quot;339933&quot;</span><span class="p">,</span> <span class="s">&quot;996633&quot;</span><span class="p">,</span> <span class="s">&quot;000000&quot;</span><span class="p">]</span>
<span class="n">MARCOM_COLORSfracRGB</span> <span class="o">=</span> <span class="p">[</span><span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">MARCOM_COLORS</span><span class="p">]</span>

<span class="c"># The CMYK values are included here just for reference. They come from the document &quot;LT Graph Color Palette and Styles.pdf&quot;</span>
<span class="n">LT_RED_1</span>        <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">MARCOM_COLORS</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>   <span class="c"># CMYK_to_RGB([0.00,   1.00,   0.65,   0.47])</span>
<span class="n">LT_BLUE_1</span>       <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">MARCOM_COLORS</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>   <span class="c"># CMYK_to_RGB([0.88,   0.77,   0.00,   0.00])</span>
<span class="n">LT_GREEN_1</span>      <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">MARCOM_COLORS</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>   <span class="c"># CMYK_to_RGB([0.80,   0.25,   0.90,   0.10])</span>
<span class="n">LT_COPPER_1</span>     <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">MARCOM_COLORS</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>   <span class="c"># CMYK_to_RGB([0.24,   0.58,   0.92,   0.09])</span>
<span class="n">LT_BLACK</span>        <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">MARCOM_COLORS</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>   <span class="c"># CMYK_to_RGB([0.00,   0.00,   0.00,   1.00])</span>
<span class="n">LT_GREEN_2</span>      <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">REAY_COLORS</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>     <span class="c"># CMYK_to_RGB([0.75,   0.05,   1.00,   0.00])</span>
<span class="n">LT_COPPER_2</span>     <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">REAY_COLORS</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>     <span class="c"># CMYK_to_RGB([0.20,   0.60,   0.80,   0.00])</span>
<span class="n">LT_BLUE_2</span>       <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">REAY_COLORS</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span>     <span class="c"># CMYK_to_RGB([0.70,   0.45,   0.01,   0.01])??</span>
<span class="n">LT_YELLOW_2</span>     <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">REAY_COLORS</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>     <span class="c"># CMYK_to_RGB([0.22,   0.25,   0.92,   0.00])</span>
<span class="n">LT_RED_2</span>        <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="n">REAY_COLORS</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>     <span class="c"># CMYK_to_RGB([0.10,   1.00,   0.90,   0.00])</span>
<span class="n">LT_BLUE_2_40PCT</span> <span class="o">=</span> <span class="n">RGB_to_fracRGB</span><span class="p">([</span><span class="mi">187</span><span class="p">,</span> <span class="mi">204</span><span class="p">,</span> <span class="mi">228</span><span class="p">])</span>       <span class="c"># Use for histograms</span>
<span class="n">LT_RED_1_40PCT</span>  <span class="o">=</span> <span class="n">RGB_to_fracRGB</span><span class="p">([</span><span class="mi">228</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">187</span><span class="p">])</span>       <span class="c"># Use for histograms</span>
<span class="n">LT_GRID</span>         <span class="o">=</span> <span class="n">CMYK_to_fracRGB</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">])</span>       <span class="c"># This comes out as #333333 whereas Bob Reay&#39;s value is #323232</span>
<span class="n">LT_SCOPE_GRID</span>   <span class="o">=</span> <span class="n">CMYK_to_fracRGB</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span>       <span class="c"># </span>
<span class="n">LT_TEXT</span>         <span class="o">=</span> <span class="n">webRGB_to_fracRGB</span><span class="p">(</span><span class="s">&quot;000000&quot;</span><span class="p">)</span>           <span class="c"># This makes the most sense - Black</span>

<span class="c">#</span>
<span class="c"># These are special characters that can be used in labels, notes and arrows.</span>
<span class="c"># Bob Reay&#39;s version outputs web values which seems to import into Illustrator</span>
<span class="c"># but these unicodes work just fine as well. Some characters such as sigma will</span>
<span class="c"># an error upon importation because LinearHelvCond doesn&#39;t have the character</span>
<span class="c"># but I found in my trial copy that Illustrator will just find a place a substitute.</span>
<span class="c"># Web values will only work if _escape_attrib_reversal() is called because for some</span>
<span class="c"># reason svg_backend is replacing things like &quot;&amp;&quot; with &quot;&amp;amp;&quot;.</span>
<span class="c"># S.L.M.</span>
<span class="c"># </span>
<span class="n">DELTA</span>           <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u0394</span><span class="s">&quot;</span>
<span class="n">DEGC</span>            <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u00B0</span><span class="s">C&quot;</span>
<span class="n">DEG</span>             <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u00B0</span><span class="s">&quot;</span>
<span class="n">mu</span>              <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u00B5</span><span class="s">&quot;</span> <span class="c"># &quot;&amp;#181;&quot;  </span>
<span class="n">sigma</span>           <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u03C3</span><span class="s">&quot;</span> <span class="c"># &quot;&amp;#963;&quot;</span>
<span class="n">SIGMA</span>           <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u03A3</span><span class="s">&quot;</span>
<span class="n">minus</span>           <span class="o">=</span> <span class="s">u&quot;</span><span class="se">\u2212</span><span class="s">&quot;</span>
<span class="c"># From the 4630A G02 SVG sent from Dan:</span>
<span class="c"># GRID width = 0.35</span>
<span class="c"># border width = 0.6</span>
<span class="c"># subscripts are size 6</span>
<span class="c"># text color is not set and comes out 000000</span>
<span class="c"># LT_ BORDER    = 000000</span>
<span class="c"># LT_GRID       = 58595B</span>
<span class="c"># LT_RED_1      = 981B1E</span>
<span class="c"># LT_BLUE_1     = 3953A4</span>
<span class="c"># LT_GREEN_1    = 37864B</span>
<span class="c"># LT_COPPER_1   = B57233</span>
<span class="c"># LT_BLACK      = 000000</span>
<span class="c"># LT_RED_2      = DA2032</span>
<span class="c"># LT_BLUE_2     = 547FBC</span>
<span class="c"># LT_YELLOW_2   = CFB43D #(MUSTARD)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pydoc</span>
    <span class="n">pydoc</span><span class="o">.</span><span class="n">writedoc</span><span class="p">(</span><span class="s">&#39;LTC_plot&#39;</span><span class="p">)</span>
    <span class="n">os</span><span class="o">.</span><span class="n">startfile</span><span class="p">(</span><span class="s">&quot;LTC_plot.html&quot;</span><span class="p">)</span>
    <span class="c">#print __doc__</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../PyICe.html">
              <img class="logo" src="../../_static/tssop.png" alt="Logo"/>
            </a></p>
<h3><a href="../../PyICe.html">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.lab_instruments.html">PyICe.lab_instruments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.lab_core.html">PyICe.lab_core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.lab_utils.html">PyICe.lab_utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.LTC_plot.html">PyICe.LTC_plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.lab_gui.html">PyICe.lab_gui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.lab_interfaces.html">PyICe.lab_interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.twi_instrument.html">PyICe.twi_instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.twoWireInterface.html">PyICe.twoWireInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.spi_instrument.html">PyICe.spi_instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.spi_interface.html">PyICe.spi_interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.visa_wrappers.html">PyICe.visa_wrappers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../_autosummary/PyICe.xml_registers.html">PyICe.xml_registers</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../PyICe.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Linear Technology Corporation.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
    </div>

    

    
  </body>
</html>